<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DDL & JSON to Go Struct</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
</head>

<body>
    <!-- Main Container -->
    <div class="app">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" />
                        <path d="M14 6l4 6-4 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                    <h1>DDL & JSON to Go Struct</h1>
                </div>
                <div class="header-actions">
                    <label class="checkbox-inline">
                        <input type="checkbox" id="inlineNestedStructs" checked />
                        <span>内联嵌套</span>
                    </label>
                    <select id="dbType" class="select">
                        <option value="auto">自动检测</option>
                        <option value="mysql">MySQL</option>
                        <option value="postgresql">PostgreSQL</option>
                        <option value="sqlite">SQLite</option>
                        <option value="json">JSON</option>
                    </select>
                    <button id="settingsBtn" class="btn-icon" title="设置">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                            <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" />
                            <path
                                d="M12 1v3m0 16v3M23 12h-3M4 12H1M20.5 3.5l-2.1 2.1M5.6 18.4l-2.1 2.1M20.5 20.5l-2.1-2.1M5.6 5.6L3.5 3.5"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                        </svg>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main">
            <div class="workspace">
                <!-- Input Panel -->
                <div class="panel">
                    <div class="panel-header">
                        <div class="panel-title">
                            <span>输入</span>
                            <span id="inputType" class="badge">未检测</span>
                        </div>
                        <div class="panel-actions">
                            <button id="clearBtn" class="btn-ghost">清除</button>
                            <button id="convertBtn" class="btn-primary">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                    <path d="M5 12h14m-7-7l7 7-7 7" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                                转换
                            </button>
                        </div>
                    </div>
                    <div class="panel-body">
                        <textarea id="inputArea" class="editor"
                            placeholder="粘贴你的 DDL 或 JSON...&#10;&#10;示例：&#10;CREATE TABLE users (&#10;  id INT AUTO_INCREMENT PRIMARY KEY COMMENT '用户ID',&#10;  username VARCHAR(100) NOT NULL COMMENT '用户名'&#10;);"
                            spellcheck="false"></textarea>
                    </div>
                </div>

                <!-- Output Panel -->
                <div class="panel">
                    <div class="panel-header">
                        <div class="panel-title">
                            <span>Go Struct 输出</span>
                        </div>
                        <div class="panel-actions">
                            <button id="copyBtn" class="btn-ghost">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                    <rect x="8" y="8" width="13" height="13" rx="2" stroke="currentColor"
                                        stroke-width="2" />
                                    <path d="M5 16V5a2 2 0 0 1 2-2h11" stroke="currentColor" stroke-width="2" />
                                </svg>
                                复制
                            </button>
                            <button id="exportBtn" class="btn-ghost">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                    <path d="M12 3v12m-4-4l4 4 4-4M3 21h18" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                                导出
                            </button>
                        </div>
                    </div>
                    <div class="panel-body">
                        <pre id="outputArea"
                            class="editor output"><code>// 在左侧输入 DDL 或 JSON，点击"转换"按钮生成 Go struct</code></pre>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <span id="statusMessage" class="status">就绪</span>
                <span id="lineCount" class="info">0 行</span>
            </div>
        </footer>

        <!-- Settings Modal -->
        <div id="settingsModal" class="modal hidden">
            <div class="modal-overlay"></div>
            <div class="modal-container">
                <div class="modal-header">
                    <h2>设置</h2>
                    <button id="closeModal" class="btn-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" />
                        </svg>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>结构体名称</label>
                        <input type="text" id="structNameInput" class="input" placeholder="留空自动生成" />
                    </div>
                    <div class="form-group">
                        <label>包名</label>
                        <input type="text" id="packageNameInput" class="input" value="model" />
                    </div>
                    <div class="form-group">
                        <label class="checkbox">
                            <input type="checkbox" id="generateTableName" checked />
                            <span>生成 TableName() 方法</span>
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="saveSettings" class="btn-primary">保存设置</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="parsers/detector.js"></script>
    <script src="parsers/mysql-parser.js"></script>
    <script src="parsers/postgresql-parser.js"></script>
    <script src="parsers/sqlite-parser.js"></script>
    <script src="parsers/json-parser.js"></script>
    <script src="utils/type-mapper.js"></script>
    <script src="utils/formatter.js"></script>
    <script src="utils/exporter.js"></script>
    <script src="generators/struct-generator.js"></script>
    <script src="config/settings.js"></script>
    <script src="app.js"></script>
</body>

</html>